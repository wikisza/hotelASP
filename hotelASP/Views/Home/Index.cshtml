@{
    ViewData["Title"] = "Home Page";
}

<div class="pageInfo"> <h3>Kalendarz rezerwacji</h3></div>

<div id='calendar'></div>

<script>

    const darkPalette = [
        "#4B0082", // Indigo
        "#2F4F4F", // Dark Slate Gray
        "#8B0000", // Dark Red
        "#556B2F", // Dark Olive Green
        "#483D8B", // Dark Slate Blue
        "#191970", // Midnight Blue
        "#2C2C54", // Deep Dark Blue
        "#3C3C3C"  // Dark Gray
    ];


    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: function (fetchInfo, successCallback, failureCallback) {
                fetch('/get_reservations')
                    .then(response => response.json())
                    .then(data => {
                        data.forEach((event, index) => {
                            const colorIndex = index % darkPalette.length;
                            event.backgroundColor = darkPalette[colorIndex];
                            event.borderColor = darkPalette[colorIndex];
                        });

                        console.log('Events with colors:', data); 
                        successCallback(data); 
                    })
                    .catch(error => {
                        console.error('Error fetching events:', error);
                        failureCallback(error);
                    });
            },
                headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            }
        });

        calendar.render();
    });

</script>
